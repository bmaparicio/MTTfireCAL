# MTTfireCAL
MTT fire spread semi-automatic calibration - R package

This R package is meant to assists in the calibration of the [MTT](https://cdnsciencepub.com/doi/abs/10.1139/x02-068) fire spread models. The package uses the executable FConstMTT (a command line of MTT). This executable can be downloaded [here](https://www.alturassolutions.com/FB/FB_API.htm) and is essential to run the semi-automatic calibration.

## Instalation
To install MTTfireCAL from GitHub:
```
install.packages("devtools")
install.packages("usethis")
library(devtools)
install_github("bmaparicio/MTTfireCAL")
```
If you are using Windows, you will need to have a version of Rtools installed that matches your version of R. Rtools can be downloaded from [here](https://cran.r-project.org/bin/windows/Rtools/). After downloading the Rtools, install it in your machine following the recomendations [here](https://cran.r-project.org/bin/windows/Rtools/rtools40.html)

## File Descriptions
- get_fire_weather.R is the script that downloads [ERA5-Land reanalysis data](https://www.ecmwf.int/en/era5-land) and stores it in a csv file.
- fire_weather_nc.R is the script that extracts meteorological variables from an existing netcdf file and stores it in a csv file.
- build_report.R is the script that creates files with meteorological characterization of the study area during fire events (csv and fms files); and a word file with the characterization of the fire regime.
- Gen_ign.R is the script that generates ignitions in the study area that either follow a surface of probability of ignition (raster file) or are randomly allocated
- run_fconstmtt.R is the script that uses the files generated by the functions build_report and Gen_ign to generate the input and batch files. Optionally, it runs FConstMTT. 
- check_BP_nxburned.R is the script that compares the estimated burn probability with the historical number of times burned.
- check_fire_size.R is the script that compares the simulated fire size distribution with the historical fire size distribution.

Please also refer to the [package pdf manual](https://github.com/bmaparicio/MTTfireCAL/blob/master/MTTfireCAL_1.0.0.pdf) for complete information on the functions and how to use them. 

## Community Feedback
If you have any sugestion on how to improve MTTfireCAL package or if you encounter any issue using the package, please open a new [issue](https://github.com/bmaparicio/MTTfireCAL/issues). Please include a minimal, reproducible example of the bug, along with the exact error message or output you receive and the behavior you expect.

## Citation
Please use the following citation when refering to this package:
Aparício, B.A., Benali, A., Sá, A.C.L. (2023) ‘MTTfireCAL’ package for R – An innovative, comprehensive and fast procedure to calibrate the MTT fire spread modelling system. MethodsX.
